document.addEventListener("DOMContentLoaded",function(){const e=document.getElementById("contentFrame"),n=document.getElementById("loading"),t=document.getElementById("bottomBar"),i=document.getElementById("openFullPage");let d="";function o(i){d=i,chrome.storage.local.set({sidepanelURL:i}),n.style.display="flex",e.style.display="none",t.style.display="none",e.src=i,e.onload=function(){e.style.display="block",n.style.display="none",t.style.display="flex"},e.onerror=function(){n.innerHTML=`\n        <div style="text-align: center; padding: 2rem;">\n          <h1 style="font-size: 1.5rem; margin-bottom: 1rem;">Lỗi tải nội dung</h1>\n          <p>Không thể tải nội dung từ ${i}</p>\n          <button id="retryBtn" style="padding: 0.5rem 1rem; background: rgb(59, 130, 246); border-radius: 0.25rem; margin-top: 1rem;">Thử lại</button>\n        </div>\n      `,t.style.display="none",document.getElementById("retryBtn").addEventListener("click",()=>{o(i)})}}i.addEventListener("click",function(){d&&(chrome.tabs.create({url:d}),window.close())}),chrome.runtime.onMessage.addListener((e,n,t)=>("sidepanel"===e.target&&"loadURL"===e.action&&(o(e.url),t({success:!0})),!0)),chrome.storage.local.get(["sidepanelURL"],e=>{e.sidepanelURL?o(e.sidepanelURL):n.innerHTML='\n        <div style="text-align: center; padding: 2rem;">\n          <h1 style="font-size: 1.5rem; margin-bottom: 1rem;">Easy Quiz Poly</h1>\n          <p>Chọn một tính năng từ popup để hiển thị nội dung tại đây.</p>\n        </div>\n      '})});
